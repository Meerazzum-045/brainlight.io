<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<meta charset="UTF-8">
<head>
    <style>
        body {
            background-color: hsl(25, 100%, 49%);
            margin: 0;
            height: 100%;
            overflow: hidden;
            touch-action: none; /* Prevent zoom and pan */
        }
        .lottie-animation {
            position: absolute;
            width: 200px;
            height: 200px;
            transform: translate(-50%, -50%);
            pointer-events: none; /* Prevent animations from capturing touch events */
        }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.7.6/lottie.min.js"></script>
</head>
<body>

<script>
 var animationData = {
    "v": "5.8.1",
    "fr": 29.9700012207031,
    "ip": 0,
    "op": 121.000004928431,
    "w": 200,
    "h": 200,
    "nm": "Comp 1",
    "ddd": 0,
    "assets": [],
    "layers": [{
        "ddd": 0,
        "ind": 1,
        "ty": 4,
        "nm": "#C",
        "ln": "C",
        "sr": 1,
        "ks": {
            "o": { "a": 0, "k": 100, "ix": 11 },
            "r": { "a": 0, "k": 0, "ix": 10 },
            "p": { "a": 0, "k": [101, 101, 0], "ix": 2, "l": 2 },
            "a": { "a": 0, "k": [-2, -12, 0], "ix": 1, "l": 2 },
            "s": { "a": 0, "k": [100, 100, 100], "ix": 6, "l": 2 }
        },
        "ao": 0,
        "shapes": [{
            "ty": "gr",
            "it": [{
                "d": 1,
                "ty": "el",
                "s": { "a": 0, "k": [156, 156], "ix": 2 },
                "p": { "a": 0, "k": [0, 0], "ix": 3 },
                "nm": "Ellipse Path 1",
                "mn": "ADBE Vector Shape - Ellipse",
                "hd": false
            }, {
                "ty": "tm",
                "s": { "a": 1, "k": [{ "i": { "x": [0.667], "y": [1] }, "o": { "x": [0.333], "y": [0] }, "t": 90, "s": [0] }, { "t": 120.0000048877, "s": [45] }], "ix": 1 },
                "e": { "a": 1, "k": [{ "i": { "x": [0.667], "y": [1] }, "o": { "x": [0.333], "y": [0] }, "t": 0, "s": [0] }, { "t": 30.0000012219251, "s": [45] }], "ix": 2 },
                "o": { "a": 1, "k": [{ "i": { "x": [0.667], "y": [1] }, "o": { "x": [0.333], "y": [0] }, "t": 0, "s": [0] }, { "t": 120.0000048877, "s": [1440] }], "ix": 3 },
                "m": 1,
                "ix": 2,
                "nm": "Trim Paths 1",
                "mn": "ADBE Vector Filter - Trim",
                "hd": false
            }, {
                "ty": "st",
                "c": { "a": 0, "k": [0.196077997544, 0.615685975318, 0.345097979377, 1], "ix": 3 },
                "o": { "a": 0, "k": 100, "ix": 4 },
                "w": { "a": 0, "k": 15, "ix": 5 },
                "lc": 1,
                "lj": 1,
                "ml": 4,
                "bm": 0,
                "nm": "Stroke 1",
                "mn": "ADBE Vector Graphic - Stroke",
                "hd": false
            }, {
                "ty": "tr",
                "p": { "a": 0, "k": [-2, -12], "ix": 2 },
                "a": { "a": 0, "k": [0, 0], "ix": 1 },
                "s": { "a": 1, "k": [{ "i": { "x": [0.242, 0.242], "y": [1.002, 1.002] }, "o": { "x": [0.333, 0.333], "y": [0, 0] }, "t": 2, "s": [0, 0] }, { "t": 17.0000006924242, "s": [100, 100] }], "ix": 3 },
                "r": { "a": 0, "k": 0, "ix": 6 },
                "o": { "a": 0, "k": 100, "ix": 7 },
                "sk": { "a": 0, "k": 0, "ix": 4 },
                "sa": { "a": 0, "k": 0, "ix": 5 },
                "nm": "Transform"
            }],
            "nm": "Ellipse 3",
            "np": 3,
            "cix": 2,
            "bm": 0,
            "ix": 1,
            "mn": "ADBE Vector Group",
            "hd": false
        }, {
            "ty": "gr",
            "it": [{
                "d": 1,
                "ty": "el",
                "s": { "a": 0, "k": [156, 156], "ix": 2 },
                "p": { "a": 0, "k": [0, 0], "ix": 3 },
                "nm": "Ellipse Path 1",
                "mn": "ADBE Vector Shape - Ellipse",
                "hd": false
            }, {
                "ty": "st",
                "c": { "a": 0, "k": [0.196077997544, 0.615685975318, 0.345097979377, 1], "ix": 3 },
                "o": { "a": 0, "k": 30, "ix": 4 },
                "w": { "a": 0, "k": 15, "ix": 5 },
                "lc": 1,
                "lj": 1,
                "ml": 4,
                "bm": 0,
                "nm": "Stroke 1",
                "mn": "ADBE Vector Graphic - Stroke",
                "hd": false
            }, {
                "ty": "tr",
                "p": { "a": 0, "k": [-2, -12], "ix": 2 },
                "a": { "a": 0, "k": [0, 0], "ix": 1 },
                "s": { "a": 1, "k": [{ "i": { "x": [0.242, 0.242], "y": [1.002, 1.002] }, "o": { "x": [0.333, 0.333], "y": [0, 0] }, "t": 2, "s": [0, 0] }, { "t": 17.0000006924242, "s": [100, 100] }], "ix": 3 },
                "r": { "a": 0, "k": 0, "ix": 6 },
                "o": { "a": 0, "k": 100, "ix": 7 },
                "sk": { "a": 0, "k": 0, "ix": 4 },
                "sa": { "a": 0, "k": 0, "ix": 5 },
                "nm": "Transform"
            }],
            "nm": "Ellipse 2",
            "np": 2,
            "cix": 2,
            "bm": 0,
            "ix": 2,
            "mn": "ADBE Vector Group",
            "hd": false
        }, {
            "ty": "gr",
            "it": [{
                "d": 1,
                "ty": "el",
                "s": { "a": 0, "k": [100, 100], "ix": 2 },
                "p": { "a": 0, "k": [0, 0], "ix": 3 },
                "nm": "Ellipse Path 1",
                "mn": "ADBE Vector Shape - Ellipse",
                "hd": false
            }, {
                "ty": "fl",
                "c": { "a": 0, "k": [0.196077997544, 0.615685975318, 0.345097979377, 1], "ix": 4 },
                "o": { "a": 0, "k": 100, "ix": 5 },
                "r": 1,
                "bm": 0,
                "nm": "Fill 1",
                "mn": "ADBE Vector Graphic - Fill",
                "hd": false
            }, {
                "ty": "tr",
                "p": { "a": 0, "k": [-2, -12], "ix": 2 },
                "a": { "a": 0, "k": [0, 0], "ix": 1 },
                "s": { "a": 1, "k": [{ "i": { "x": [0.242, 0.242], "y": [1.002, 1.002] }, "o": { "x": [0.333, 0.333], "y": [0, 0] }, "t": 0, "s": [0, 0] }, { "t": 15.0000006109625, "s": [100, 100] }], "ix": 3 },
                "r": { "a": 0, "k": 0, "ix": 6 },
                "o": { "a": 0, "k": 100, "ix": 7 },
                "sk": { "a": 0, "k": 0, "ix": 4 },
                "sa": { "a": 0, "k": 0, "ix": 5 },
                "nm": "Transform"
            }],
            "nm": "Ellipse 1",
            "np": 2,
            "cix": 2,
            "bm": 0,
            "ix": 3,
            "mn": "ADBE Vector Group",
            "hd": false
        }],
        "ip": 0,
        "op": 300.00001221925,
        "st": 0,
        "bm": 0
    }],
    "markers": []
};

    // Array of predefined colors
    var colors = ["#284B63", "#FF0080", "#76605E", "#FDFD96", "#355b41"];
    var colorIndex = 0;

    // Shuffle colors array
    function shuffleColors(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }
    shuffleColors(colors);

    function getNextColor() {
        const color = colors[colorIndex];
        colorIndex = (colorIndex + 1) % colors.length;
        // Convert hex color to [r, g, b, a]
        var r = parseInt(color.slice(1, 3), 16) / 255;
        var g = parseInt(color.slice(3, 5), 16) / 255;
        var b = parseInt(color.slice(5, 7), 16) / 255;
        return [r, g, b, 1];
    }

    var touchAnimations = {};

    function createAnimation(id, x, y) {
        if (Object.keys(touchAnimations).length >= 5 || touchAnimations[id]) return; // Limit to 5 touches and prevent recreation

        // Clone the animation data to avoid modifying the original
        var animationDataCopy = JSON.parse(JSON.stringify(animationData));

        // Set unique color
        var uniqueColor = getNextColor();
        animationDataCopy.layers[0].shapes[0].it[2].c.k = uniqueColor;
        animationDataCopy.layers[0].shapes[0].it[1].c.k = uniqueColor;

        var container = document.createElement('div');
        container.className = 'lottie-animation';
        container.style.left = x + 'px'; // Set the initial position
        container.style.top = y + 'px'; // Set the initial position
        document.body.appendChild(container);

        var params = {
            container: container,
            renderer: 'svg',
            loop: false, // Only play once
            autoplay: true,
            animationData: animationDataCopy
        };

        var anim = lottie.loadAnimation(params);
        touchAnimations[id] = { container: container, animation: anim };
    }

    function updateAnimationPosition(id, x, y) {
        if (touchAnimations[id]) {
            var container = touchAnimations[id].container;
            container.style.left = x + 'px'; // Update position
            container.style.top = y + 'px'; // Update position
        }
    }

    function removeAnimation(id) {
        if (touchAnimations[id]) {
            var container = touchAnimations[id].container;
            var anim = touchAnimations[id].animation;
            anim.destroy(); // Destroy the animation instance
            document.body.removeChild(container); // Remove the container
            delete touchAnimations[id];
        }
    }

    document.addEventListener('touchstart', function(event) {
        event.preventDefault(); // Prevent scrolling and zooming
        var touches = event.touches;
        for (var i = 0; i < touches.length; i++) {
            if (!touchAnimations[touches[i].identifier]) {
                createAnimation(touches[i].identifier, touches[i].clientX, touches[i].clientY);
            }
        }
    });

    document.addEventListener('touchmove', function(event) {
        event.preventDefault(); // Prevent scrolling and zooming
        var touches = event.touches;
        for (var i = 0; i < touches.length; i++) {
            updateAnimationPosition(touches[i].identifier, touches[i].clientX, touches[i].clientY);
        }
    });

    document.addEventListener('touchend', function(event) {
        event.preventDefault(); // Prevent scrolling and zooming
        var touches = event.changedTouches;
        for (var i = 0; i < touches.length; i++) {
            removeAnimation(touches[i].identifier);
        }
    });

    document.addEventListener('touchcancel', function(event) {
        event.preventDefault(); // Prevent scrolling and zooming
        var touches = event.changedTouches;
        for (var i = 0; i < touches.length; i++) {
            removeAnimation(touches[i].identifier);
        }
    });
</script>
</body>
</html>
