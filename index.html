<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<meta charset="UTF-8">
<head>
    <style>
        body {
            background-color: hsl(25, 100%, 49%);
            margin: 0px;
            height: 100%;
            overflow: hidden;
        }
        .lottie-animation {
            background-color: transparent;
            display: block;
            overflow: hidden;
            transform: translate3d(0, 0, 0);
            text-align: center;
            opacity: 1;
            position: absolute; /* Make the position absolute */
            pointer-events: none; /* Allow clicks to pass through the container */
            width: 300px; /* Set fixed width for animation container */
            height: 300px; /* Set fixed height for animation container */
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.7.6/lottie.min.js"></script>
</head>
<body>

<script>
    var animationData = {
        "v": "5.8.1", "fr": 29.9700012207031, "ip": 0, "op": 31.0000012626559, "w": 300, "h": 300, "nm": "Comp 1", "ddd": 0, "assets": [], "layers": [{
            "ddd": 0, "ind": 1, "ty": 4, "nm": "#C", "ln": "C", "sr": 1, "ks": {
                "o": { "a": 0, "k": 100, "ix": 11 }, "r": { "a": 0, "k": 0, "ix": 10 }, "p": { "a": 0, "k": [150, 150, 0], "ix": 2, "l": 2 }, "a": { "a": 0, "k": [0, 0, 0], "ix": 1, "l": 2 }, "s": {
                    "a": 1, "k": [{ "i": { "x": [0.242, 0.242, 0.667], "y": [0.994, 0.994, 1] }, "o": { "x": [0.333, 0.333, 0.333], "y": [0, 0, 0] }, "t": 0, "s": [0, 0, 100] }, { "t": 15.0000006109625, "s": [100, 100, 100] }], "ix": 6, "l": 2
                }
            }, "ao": 0, "shapes": [{
                "ty": "gr", "it": [{
                    "d": 1, "ty": "el", "s": { "a": 0, "k": [156, 156], "ix": 2 }, "p": { "a": 0, "k": [0, 0], "ix": 3 }, "nm": "Ellipse Path 1", "mn": "ADBE Vector Shape - Ellipse", "hd": false
                }, {
                    "ty": "st", "c": { "a": 0, "k": [0.196077997544, 0.615685975318, 0.345097979377, 1], "ix": 3 }, "o": { "a": 0, "k": 100, "ix": 4 }, "w": { "a": 0, "k": 4, "ix": 5 }, "lc": 1, "lj": 1, "ml": 4, "bm": 0, "nm": "Stroke 1", "mn": "ADBE Vector Graphic - Stroke", "hd": false
                }, {
                    "ty": "fl", "c": { "a": 0, "k": [0.196077997544, 0.615685975318, 0.345097979377, 1], "ix": 4 }, "o": { "a": 0, "k": 100, "ix": 5 }, "r": 1, "bm": 0, "nm": "Fill 1", "mn": "ADBE Vector Graphic - Fill", "hd": false
                }, {
                    "ty": "tr", "p": { "a": 0, "k": [-2, -12], "ix": 2 }, "a": { "a": 0, "k": [0, 0], "ix": 1 }, "s": { "a": 0, "k": [100, 100], "ix": 3 }, "r": { "a": 0, "k": 0, "ix": 6 }, "o": { "a": 0, "k": 100, "ix": 7 }, "sk": { "a": 0, "k": 0, "ix": 4 }, "sa": { "a": 0, "k": 0, "ix": 5 }, "nm": "Transform"
                }], "nm": "Ellipse 1", "np": 3, "cix": 2, "bm": 0, "ix": 1, "mn": "ADBE Vector Group", "hd": false
            }], "ip": 0, "op": 300.00001221925, "st": 0, "bm": 0
        }], "markers": []
    };

    var touchAnimations = {};

    function createAnimation(id, x, y) {
        if (Object.keys(touchAnimations).length >= 5 || touchAnimations[id]) return; // Limit to 5 touches and prevent recreation

        var container = document.createElement('div');
        container.className = 'lottie-animation';
        container.style.left = (x - 150) + 'px'; // Center the animation
        container.style.top = (y - 150) + 'px'; // Center the animation
        document.body.appendChild(container);

        var params = {
            container: container,
            renderer: 'svg',
            loop: false, // Loop the animation while touch is active
            autoplay: true,
            animationData: animationData
        };

        var anim = lottie.loadAnimation(params);
        touchAnimations[id] = { container: container, animation: anim };
    }

    function updateAnimationPosition(id, x, y) {
        if (touchAnimations[id]) {
            var container = touchAnimations[id].container;
            container.style.left = (x - 150) + 'px'; // Update position
            container.style.top = (y - 150) + 'px'; // Update position
        }
    }

    function removeAnimation(id) {
        if (touchAnimations[id]) {
            var container = touchAnimations[id].container;
            var anim = touchAnimations[id].animation;
            anim.destroy(); // Destroy the animation instance
            document.body.removeChild(container); // Remove the container
            delete touchAnimations[id];
        }
    }

    document.addEventListener('touchstart', function(event) {
        var touches = event.touches;
        for (var i = 0; i < touches.length; i++) {
            if (!touchAnimations[touches[i].identifier]) {
                createAnimation(touches[i].identifier, touches[i].clientX, touches[i].clientY);
            }
        }
    });

    document.addEventListener('touchmove', function(event) {
        var touches = event.touches;
        for (var i = 0; i < touches.length; i++) {
            updateAnimationPosition(touches[i].identifier, touches[i].clientX, touches[i].clientY);
        }
    });

    document.addEventListener('touchend', function(event) {
        var changedTouches = event.changedTouches;
        for (var i = 0; i < changedTouches.length; i++) {
            removeAnimation(changedTouches[i].identifier);
        }
    });

    document.addEventListener('touchcancel', function(event) {
        var changedTouches = event.changedTouches;
        for (var i = 0; i < changedTouches.length; i++) {
            removeAnimation(changedTouches[i].identifier);
        }
    });
</script>
</body>
</html>
